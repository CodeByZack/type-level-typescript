import PageLayout from '../layouts/PageLayout';
import CodeEditor from '../components/CodeEditor';
import ItalicTitle from '../components/ItalicTitle';
import { PostCards } from '../components/Card';
import { intrParcticeArr } from '../practice/index';

export const meta = {};


# ç±»å‹å°±æ˜¯æ•°æ®

æ¯ç§ç¼–ç¨‹è¯­è¨€éƒ½æ˜¯å…³äº**è½¬æ¢æ•°æ®**çš„ï¼ŒType-level TypeScript ä¹Ÿä¸ä¾‹å¤–ã€‚ä¸å…¶ä»–ç¼–ç¨‹è¯­è¨€çš„ä¸»è¦åŒºåˆ«åœ¨äºæˆ‘ä»¬çš„æ•°æ®æ˜¯**ç±»å‹**ï¼æˆ‘ä»¬ç¼–å†™å°†ç±»å‹ä½œä¸ºè¾“å…¥å¹¶è¾“å‡ºä¸€äº›å…¶ä»–ç±»å‹çš„ç¨‹åºã€‚

æŒæ¡è¿™é—¨è¯­è¨€éœ€è¦ä½ æ·±å…¥çš„ç†è§£å®ƒçš„ä¸åŒæ•°æ®å’Œä¸åŒæ•°æ®ç»“æ„çš„ç‰¹æ€§ã€‚åœ¨æ¥ä¸‹æ¥å‡ ç« ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å®ƒä»¬å¹¶äº†è§£å®ƒä»¬ä¸æˆ‘ä»¬å¸¸ç”¨çš„ value-level çš„æ¦‚å¿µä¹‹é—´çš„å…³è”ã€‚è®©æˆ‘ä»¬å¼€å§‹å§ï¼

## äº”ç§ç±»å‹

TypeScript æä¾›äº†äº”ç§ä¸»è¦çš„ç±»å‹ï¼š**åŸºç¡€**ç±»å‹ã€**å­—é¢é‡**ç±»å‹ã€**æ•°æ®ç»“æ„**ç±»å‹ã€**è”åˆ**ç±»å‹å’Œ**äº¤é›†**ç±»å‹ã€‚

### åŸºç¡€ç±»å‹

ä½ è‚¯å®šå·²ç»éå¸¸ç†Ÿæ‚‰åŸºç¡€ç±»å‹äº†ã€‚æˆ‘ä»¬ä¸€ç›´ä½¿ç”¨å®ƒä»¬æ¥æ³¨é‡Šæˆ‘ä»¬æ—¥å¸¸ TypeScript ä»£ç ä¸­çš„å˜é‡å’Œå‡½æ•°ã€‚ä»¥ä¸‹æ˜¯åŸå§‹ç±»å‹çš„åˆ—è¡¨ï¼š

```ts
type Primitives =
  | number
  | string
  | boolean
  | symbol
  | bigint
  | undefined
  | null;
```

JavaScript é‡Œé™¤äº†å¯¹è±¡å’Œå‡½æ•°ä»¥å¤–çš„å…¶ä»–å€¼ï¼Œéƒ½å±äºåŸºç¡€ç±»å‹ã€‚æŸäº›åŸºç¡€ç±»å‹æ‹¥æœ‰æ— é™ä¸ªå€¼ï¼Œåƒ number å’Œ string ï¼Œä½†æ˜¯å…¶ä¸­ null å’Œ undefined ç±»å‹åªæ‹¥æœ‰ä¸€ä¸ªå€¼ã€‚ è¿™äº›ç‰¹æ€§åŒæ—¶é€ å°±äº†æˆ‘ä»¬ç¬¬äºŒç§ç±»å‹ï¼š**å­—é¢é‡ç±»å‹**ã€‚

### å­—é¢é‡ç±»å‹


å­—é¢é‡ç±»å‹æ˜¯â€œç²¾ç¡®â€ç±»å‹ï¼ŒåªåŒ…å«**ä¸€ä¸ªå¯èƒ½çš„å€¼**ã€‚

```ts
type Literals =
  | 20
  | "Hello"
  | true
  | 10000n
  /* | ... */;
```

ç±»å‹ä¸º20çš„å˜é‡åªèƒ½è¢«èµ‹å€¼ä¸º20ï¼Œç±»å‹ä¸º "Hello" çš„å˜é‡åªèƒ½è¢«èµ‹å€¼ä¸º "Hello"ï¼Œç­‰ç­‰ã€‚

```ts
const twenty: 20 = 20; // âœ… works!
const hundred: 20 = 100;
//          ^ âŒ `100` isn't assignable to the type `20`.
```

å­—é¢é‡ç±»å‹æœ‰æ— æ•°ç§ï¼Œå®ƒä»¬çœ‹èµ·æ¥å°±åƒæ™®é€šçš„å€¼ï¼Œä½†æ˜¯ä¸è¦ææ··äº†ï¼Œå®ƒä»¬éƒ½æ˜¯ç±»å‹ï¼

**å€¼å’Œç±»å‹å±äºä¸¤ä¸ªå®Œå…¨ä¸åŒçš„ä¸–ç•Œ** â€”â€” ä»–ä»¬å½¼æ­¤ç‹¬ç«‹å­˜åœ¨ï¼Œåœ¨å•ä¸ªè¡¨è¾¾å¼é‡Œä¸èƒ½è¢«æ··åœ¨ä¸€èµ·[^1]ã€‚ æˆ‘å‘ç°ï¼Œå¦‚æœæˆ‘ä»¬å°†å­—é¢é‡ç±»å‹è§†ä¸ºç±»å‹ä¸–ç•Œé‡Œå€¼çš„ä¸€ç§æ˜ å°„ï¼Œå°†ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚ä½†æ˜¯éœ€è¦æ—¶åˆ»è®°ä½ï¼Œç±»å‹å’Œå€¼å®ƒä»¬æ˜¯ä¸åŒçš„ä¸œè¥¿ã€‚ä¸€ä¸ªæ˜¾è‘—çš„åŒºåˆ«æ˜¯ï¼Œæˆ‘ä»¬æ— æ³•åœ¨ type-level ä¹¦å†™æ•°å­¦è¡¨è¾¾å¼ã€‚æ¯”å¦‚ï¼Œ`type five = 2 + 3` æ˜¯å®Œå…¨æ— æ•ˆçš„ï¼Œä½†æ˜¯ `const five = 2 + 3` æ˜¯å®Œå…¨æœ‰æ•ˆçš„ã€‚

å½“æ”¾åœ¨è”åˆç±»å‹ä¸­æ¥æè¿°ä¸€ç»„æœ‰é™å¯èƒ½çš„ç±»å‹æ—¶ï¼Œå­—é¢é‡ç±»å‹éå¸¸æœ‰ç”¨ï¼Œæ¯”å¦‚ `type TrafficLight = "green" | "orange" | "red"` ã€‚

### æ•°æ®ç»“æ„ç±»å‹

åœ¨ type-level ä¸–ç•Œé‡Œï¼Œæˆ‘ä»¬æ‹¥æœ‰å››ç§å†…ç½®çš„æ•°æ®ç»“æ„å¯ä¾›ä½¿ç”¨ï¼š**objects**, **records**, **tuples** and **arrays**ã€‚

```ts
type DataStructures =
  | { key1: boolean; key2: number } // objects
  | { [key: string]: number } // records
  | [boolean, number] // tuples
  | number[]; // arrays
```

- **Object** ç±»å‹ç”¨äºæè¿°ä¸€ç»„æœ‰é™å¥å€¼çš„å¯¹è±¡ï¼Œè¿™äº›é”®å¯èƒ½åŒ…å«ä¸åŒç±»å‹çš„å€¼ã€‚
- **Record** ç±»å‹å’Œ **Object** ç±»å‹ç›¸ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºå®ƒæè¿°æ‹¥æœ‰æœªçŸ¥æ•°é‡çš„å¥å€¼çš„å¯¹è±¡ï¼Œå¹¶ä¸”æ‰€æœ‰å¥çš„å€¼çš„ç±»å‹éƒ½æ˜¯ç›¸åŒçš„ã€‚æ¯”å¦‚ï¼Œåœ¨`{ [key: string]: number }`é‡Œï¼Œæ‰€æœ‰å€¼ç±»å‹éƒ½æ˜¯ number ã€‚
- **Tuple** ç±»å‹ç”¨äºæè¿°å›ºå®šé•¿åº¦çš„æ•°ç»„ï¼Œæ¯ä¸ªç´¢å¼•å¯ä»¥å¯¹åº”ä¸åŒçš„å€¼ã€‚
- **Array** ç±»å‹ç”¨äºæè¿°é•¿åº¦ä¸å®šçš„æ•°ç»„ï¼Œå’Œ **Record** ç±»å‹ä¸€æ ·ï¼Œå…¶ä¸­æ‰€æœ‰çš„å€¼éƒ½æ˜¯ç›¸åŒç±»å‹çš„ã€‚

åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†èŠ±æ›´å¤šæ—¶é—´å­¦ä¹ å®ƒä»¬ã€‚

### è”åˆç±»å‹å’Œäº¤å‰ç±»å‹

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ‰€çœ‹åˆ°çš„ä¸€åˆ‡éƒ½ä¸ value-level ä¸­æ‰€ç”¨åˆ°çš„æ¦‚å¿µç›¸ä¼¼ï¼Œä½†æ˜¯è”åˆç±»å‹å’Œäº¤å‰ç±»å‹ä¸ä¸€æ ·ã€‚å®ƒä»¬åªå­˜åœ¨äº type-level ä¸–ç•Œï¼Œå»ºç«‹ä¸€ä¸ªè‰¯å¥½çš„å¿ƒæ™ºæ¨¡å‹æ¥å­¦ä¹ å®ƒä»¬æ˜¯éå¸¸é‡è¦çš„ï¼Œå°½ç®¡è¿™å……æ»¡ç€æŒ‘æˆ˜ã€‚

å®ƒä»¬çœ‹èµ·æ¥åƒè¿™æ ·ï¼š

```ts
type Union = X | Y;

type Intersection = X & Y;
```

ç®€å•æ¥è¯´ï¼Œä½ å¯ä»¥ç†è§£è”åˆç±»å‹ `X | Y` ä¸ºâ€œä¸€ä¸ªå€¼çš„ç±»å‹è¦ä¹ˆå±äºç±»å‹ **X** è¦ä¹ˆå±äºç±»å‹ **Y**â€ï¼Œäº¤å‰ç±»å‹ `X & Y` ä¸ºâ€œä¸€ä¸ªå€¼çš„ç±»å‹å³å±äºç±»å‹ **X** åˆå±äºç±»å‹ **Y**â€ã€‚

æˆ‘ä»¬å€¾å‘äºæŠŠ `ï½œ` å’Œ `&` è§†ä¸ºæ“ä½œç¬¦ï¼Œä½†æ˜¯äº‹å®ä¸Šï¼Œå®ƒä»¬ä¹Ÿæ˜¯æ•°æ®ç»“æ„ã€‚

åˆ›å»ºè”åˆç±»å‹ `X | Y` ä¸ä¼šåƒæ“ä½œç¬¦é‚£æ ·åˆ›å»ºä¸€ä¸ªæ–°çš„ä¸é€æ˜çš„ç±»å‹ã€‚ç›¸åï¼Œå®ƒå°† `X` å’Œ `Y` æŒ‰åºæ”¾åœ¨ä¸€ä¸ªç›’å­é‡Œï¼Œä¹‹åæˆ‘ä»¬å¯ä»¥ä»ä¸­**æå–**å®ƒä»¬ã€‚åœ¨æ¥ä¸‹æ¥çš„ç« èŠ‚é‡Œï¼Œæˆ‘ä»¬å°†ä¼šçœ‹åˆ°ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥**éå†**è”åˆç±»å‹ä¸­çš„æ¯ç§ç±»å‹ã€‚è€ƒè™‘åˆ°è¿™ç‚¹ï¼Œ `|` çœ‹èµ·æ¥æ›´åƒæ˜¯ä¸€ç§å°†ç±»å‹æ·»åŠ åˆ°æŸç§ **â€œè”åˆâ€æ•°æ®ç»“æ„** çš„æ–¹æ³•ã€‚ä½†å®ƒåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ

å¥½å§ï¼Œæˆ‘ä»¬å¯ä»¥è¯´ type-level ä¸­çš„è”åˆç±»å‹ç­‰ä»·äº Javascript ä¸­çš„ Set ï¼Œ ä½†å®é™…ä¸Šçš„æƒ…å†µæ›´å¤æ‚ä¸€äº›ã€‚ä¸ºäº†æ›´å¥½çš„æŒæ¡è”åˆç±»å‹å’Œäº¤å‰ç±»å‹ï¼Œæˆ‘éœ€è¦ä»‹ç»ä¸€ä¸ª type-level ä¸­çš„åŸºç¡€æ¦‚å¿µï¼š**æ‰€æœ‰ç±»å‹éƒ½æ˜¯é›†åˆ**ã€‚

### ç±»å‹å°±æ˜¯é›†åˆ

TypeScript çš„ä¸€ä¸ªæœ‰è¶£ç‰¹æ€§æ˜¯ä¸€ä¸ªå€¼å¯ä»¥å±äºå¤šä¸ªç±»å‹ã€‚ä¾‹å¦‚ï¼Œå€¼ 2 å¯ä»¥èµ‹ç»™ `number` ç±»å‹çš„å˜é‡ï¼Œä¹Ÿå¯ä»¥èµ‹ç»™ `2` ç±»å‹çš„å˜é‡ï¼Œç”šè‡³æ˜¯ `1 | 2 | 3` ç±»å‹çš„å˜é‡. æ­¤ç‰¹æ€§ç§°ä¹‹ä¸º**å­ç±»å‹**ã€‚è¿™æ„å‘³ç€ç±»å‹å¯ä»¥åŒ…å«åœ¨å…¶ä»–ç±»å‹ä¸­ï¼Œæˆ–è€…æ¢å¥è¯è¯´ï¼Œç±»å‹å¯ä»¥æ˜¯å…¶ä»–ç±»å‹çš„**å­é›†**ã€‚

é‚£æ„å‘³ç€ï¼Œä¸ä»…ä»…æ˜¯é›†åˆï¼Œå…¶å®ƒæ‰€æœ‰ç±»å‹éƒ½æ˜¯é›†åˆï¼ç±»å‹å¯ä»¥**åŒ…å«**å…¶å®ƒç±»å‹ï¼Œç›¸äº’**é‡å **æˆ–è€…ç›¸äº’**æ’æ–¥**ã€‚

ä¾‹å¦‚ï¼Œå­—é¢é‡ `"H1"` å’Œ å­—é¢é‡ `"Hello"` éƒ½è¢« `string` ç±»å‹æ‰€åŒ…å«ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯ç»„æˆ `strings` è¿™ä¸ªå¤§å®¶åº­ä¸­çš„ä¸€éƒ¨åˆ†ï¼š

![1](./img/02-types-are-just-data/1.svg)

æˆ‘ä»¬è¯´ `â€œHiâ€` å’Œ `â€œHelloâ€` æ˜¯ `string` çš„å­ç±»å‹ï¼Œè€Œ `string` æ˜¯å®ƒä»¬çš„è¶…ç±»å‹ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥å°† `â€œHiâ€` æˆ– `â€œHelloâ€` ç±»å‹çš„å˜é‡åˆ†é…ç»™ `string` ç±»å‹çš„å˜é‡ï¼Œä½†åè¿‡æ¥ä¸è¡Œï¼š

```ts
let hi: "Hi" = "Hi";
let hello: "Hello" = "Hello";

let greeting: string;

greeting = hi; // âœ… type-checks!
greeting = hello; // âœ… type-checks!

hello = greeting; // âŒ doesn't type-check!
```

æˆ‘ä»¬ä¹Ÿå¯ä»¥è¯´ `"H1"` å’Œ `"H1"` å¯ä»¥**åˆ†é…**ç»™ `string` ç±»å‹ã€‚

**å¯åˆ†é…** è¿™ä¸ªæ¦‚å¿µåœ¨ Typescript ä¸­æ— å¤„ä¸åœ¨ã€‚å¤§å¤šæ•°çš„ç±»å‹é”™è¯¯éƒ½ä¼šå‘Šè¯‰ä½ ï¼Œè¿™ä¸ªç±»å‹ä¸èƒ½åˆ†é…ç»™å…¶å®ƒç±»å‹ã€‚å½“ä½ å¼€å§‹è®¤ä¸ºç±»å‹å°±æ˜¯é›†åˆæ—¶ï¼Œå¯åˆ†é…æ€§å˜å¾—æ›´åŠ ç›´è§‚ â€”â€” **â€œ A å¯ä»¥åˆ†é…ç»™ B â€** æ„å‘³ç€ **â€œé›†åˆ B åŒ…å«æ‰€æœ‰ é›†åˆ A ä¸­çš„å€¼â€** æˆ–è€… **â€œé›†åˆ A æ˜¯é›†åˆ B çš„å­é›†â€**

`string` ç±»å‹å’Œ `number` ç±»å‹æ˜¯äº’æ–¥çš„ï¼šå®ƒä»¬æ²¡æœ‰é‡å çš„éƒ¨åˆ†ï¼Œå› ä¸ºæ²¡æœ‰å€¼åŒæ—¶å±äºå®ƒä»¬ä¸¤ä¸ªé›†åˆã€‚

![2](./img/02-types-are-just-data/2.svg)


è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ ä¸èƒ½å°† `string` ç±»å‹çš„å˜é‡åˆ†é…ç»™ `number` ç±»å‹çš„å˜é‡ï¼Œåä¹‹äº¦ç„¶ï¼š

```ts
let greeting: string = "Hello";
let age: number = greeting; // âŒ doesn't type-check.
```

æœ€åï¼Œä¸¤ç§ç±»å‹æœ‰æ—¶ä¼š**éƒ¨åˆ†é‡å **ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒä»¬æ—¢ä¸äº’æ–¥ä¹Ÿä¸å…·æœ‰å­ç±»å‹å…³ç³»ï¼š

![3](./img/02-types-are-just-data/3.svg)

è¿™é€šå¸¸å‘ç”Ÿåœ¨ä½¿ç”¨è”åˆç±»å‹æ—¶ã€‚ä¾‹å¦‚ç±»å‹ `"green" | "orange"` å’Œç±»å‹ `"orange" | "red"` æ˜¯éƒ¨åˆ†é‡å çš„ï¼

![4](./img/02-types-are-just-data/4.svg)

è®©æˆ‘ä»¬ä¸ºè¿™ä¸¤ç§è”åˆç±»å‹å‘½åï¼š

```ts
type CanCross = "green" | "orange";
type ShouldStop = "orange" | "red";
```

ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥æ€è€ƒä¸€ä¸‹ï¼Œ`CanCross` ç±»å‹çš„å˜é‡åˆ†é…ç»™ `ShouldStop` ç±»å‹çš„å˜é‡å—ï¼Ÿ

```ts
let canCross = "orange" as CanCross; // âœ…
let shouldStop = "orange" as ShouldStop; // âœ…
canCross = shouldStop;
//       âŒ ~~~~~~~~~ type 'red' isn't assignable to the type `green` | 'orange'
shouldStop = canCross;
//         âŒ ~~~~~~~ type 'green' isn't assignable to the type `orange` | 'red'
```

ä¸èƒ½ã€‚å³ä½¿ `CanCross` å’Œ `ShouldStop` éƒ½åŒ…å« `string` ç±»å‹ `"orange"` ï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½å°† `CanCross` ç±»å‹çš„å˜é‡åˆ†é…ç»™ `ShouldStop` ç±»å‹ï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰å®Œå…¨é‡å ã€‚

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ¸…æ¥šçš„çœ‹åˆ°ï¼Œ `canCross` å’Œ `shouldStop` éƒ½åŒ…å«å€¼ `"orange"` ï¼Œä½†æ˜¯ä½ ä¸èƒ½æŠŠå®ƒèµ‹å€¼ç»™å¦ä¸€ä¸ªï¼Œè¿™å¯èƒ½å¾ˆè¿åç›´è§‰ã€‚è¯·è®°ä½ï¼Œ Typescript å¹¶ä¸çŸ¥é“å˜é‡åŒ…å«ä»€ä¹ˆå€¼ï¼Œå®ƒåªçŸ¥é“å®ƒçš„ç±»å‹ï¼

## è”åˆç±»å‹-é›†åˆçš„å¹¶é›†

å¦‚æœä½ äº†è§£ä¸€ç‚¹é›†åˆçš„ç†è®ºçŸ¥è¯†ï¼Œä½ å°±ä¼šçŸ¥é“ä¸¤ä¸ªé›†åˆçš„å¹¶é›†æ˜¯åŒ…å«è¿™ä¸¤ä¸ªé›†åˆçš„é›†åˆï¼Œæ‰€ä»¥ `A | B` ç±»å‹åŒ…å«äº†æ‰€æœ‰ `A` ç±»å‹å’Œ `B` ç±»å‹ä¸­çš„æ‰€æœ‰å¯èƒ½å€¼ã€‚ 

![5](./img/02-types-are-just-data/5.svg)

æˆ‘ä»¬å¯ä»¥å°†ä»»æ„ä¸¤ä¸ªé›†åˆåˆå¹¶ï¼ŒåŒ…æ‹¬å…¶å®ƒçš„è”åˆç±»å‹ï¼ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸Šä¸€ä¸ªç¤ºä¾‹ä¸­çš„ `CanCross` å’Œ `ShouldStop` åˆå¹¶ä¸º `TrafficLight` ç±»å‹ï¼š

![6](./img/02-types-are-just-data/6.svg)

```ts
// this is equivalent to "green" | "orange" | "red"
type TrafficLight = CanCross | ShouldStop;

let canCross: CanCross = "green";
let shouldStop: ShouldStop = "red";

let trafficLight: TrafficLight;
trafficLight = shouldStop; // âœ…
trafficLight = canCross; // âœ…
```

`TrafficLight` ç±»å‹æ˜¯ `CanCross` å’Œ `ShouldStop` çš„**è¶…é›†**ã€‚éœ€è¦æ³¨æ„ï¼Œ `"orange"` åœ¨ `TrafficLight` ç±»å‹ä¸­åªæœ‰ä¸€ä¸ªã€‚è¿™æ˜¯å› ä¸ºé›†åˆç±»å‹ä¸èƒ½å‡ºç°é‡å¤é¡¹ï¼Œæ‰€ä»¥è”åˆç±»å‹ä¹Ÿä¸èƒ½åŒ…å«é‡å¤é¡¹ã€‚

è”åˆç±»å‹æœ‰åŠ©äºåˆ›å»ºæ˜ç¡®çš„ç±»å‹çš„**åµŒå¥—å±‚æ¬¡ç»“æ„**ã€‚å¹¶ä¸”æˆ‘ä»¬æ€»æ˜¯å¯ä»¥å°†ä¸¤ç§ç±»å‹æ”¾åœ¨ä¸€ä¸ªè”åˆç±»å‹ä¸­ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥åˆ›å»ºä»»æ„æ•°é‡çš„å­ç±»å‹çº§åˆ«ï¼š

![7](./img/02-types-are-just-data/7.svg)

æ­¤æ—¶ï¼Œä½ å¯èƒ½ä¼šæƒ³ï¼Œå¦‚æœæ‰€æœ‰ç±»å‹éƒ½å¯ä»¥å±äºå…¶ä»–ç±»å‹ï¼Œé‚£ä¹ˆè¿™ç§åµŒå¥—ç±»å‹çš„å±‚æ¬¡ç»“æ„å¾€ä¸Šåˆ°å“ªé‡Œä¸ºæ­¢å‘¢ï¼Ÿæœ‰æ²¡æœ‰ä¸€ç§ç»ˆæç±»å‹ï¼ŒåŒ…å«äº†**æ‰€æœ‰å…¶å®ƒçš„ç±»å‹**ï¼Ÿ

å—¯ï¼Œæœ‰è¿™æ ·ä¸€ç§ç±»å‹ï¼Œå®ƒå« `unkown` ã€‚

## `unknown` â€” æ‰€æœ‰ç±»å‹çš„è¶…é›†

`unknown` åŒ…å«äº†ä½ åœ¨ Typescript ä¸­ä½¿ç”¨çš„æ‰€æœ‰ç±»å‹ã€‚

![8](./img/02-types-are-just-data/8.svg)

æ‚¨å¯ä»¥å°†ä»»ä½•å†…å®¹åˆ†é…ç»™ `unknown` ç±»å‹çš„å˜é‡ï¼š

```ts
let something: unknown;

something = "Hello";            // âœ…
something = 2;                  // âœ…
something = { name: "Alice" };  // âœ…
something = () => "?";          // âœ…
```

è¿™å¾ˆä¸é”™ï¼Œä½†æ˜¯è¿™ä¹Ÿæ„å‘³ç€ä½ ä¸èƒ½å¯¹ç±»å‹ä¸º `unkown` çš„å˜é‡åšå¾ˆå¾ˆå¤šå…¶å®ƒæ“ä½œï¼Œå› ä¸º Typescript å¹¶ä¸çŸ¥é“å®ƒåŒ…å«äº†ä»€ä¹ˆå€¼ï¼

```ts
let something: unknown;

something = "Hello";
something.toUpperCase();
//       ^ âŒ Property 'toUpperCase' does not exist
//            on type 'unknown'.
```

ä»»ä½•ç±»å‹ `A` ä¸ `unkown` ç±»å‹è¿›è¡Œåˆå¹¶ï¼Œæ€»æ˜¯ä¼šå¾—åˆ° `unkown` ç±»å‹ã€‚è¿™æ˜¯åˆç†çš„ï¼Œå› ä¸ºæ ¹æ®å®šä¹‰ï¼Œç±»å‹ `A` è‚¯å®šåŒ…å«åœ¨ `unkown` é‡Œï¼š

```ts
A | unknown = unknown
```

![9](./img/02-types-are-just-data/9.svg)

ä½†æ˜¯å¦‚æœå–äº¤é›†å‘¢ï¼Ÿ

ä»»ä½•ç±»å‹ `A` å’Œ `unkown` ç±»å‹è¿›è¡Œäº¤é›†è¿ç®—ä¼šå¾—åˆ°ç±»å‹ `A`ï¼š

```ts
A & unknown = A
```

é‚£æ˜¯å› ä¸ºå°†é›†åˆ `A` ä¸é›†åˆ `B` ç›¸äº¤æ„å‘³ç€æå– `A` ä¸­ä¹Ÿå±äº `B` çš„éƒ¨åˆ†ï¼ç”±äºä»»ä½•ç±»å‹ `A` éƒ½åœ¨ `unknown` å†…éƒ¨ï¼Œå› æ­¤ `A & unknown` å°±æ˜¯ `A`ã€‚

![10](./img/02-types-are-just-data/10.svg)

## äº¤å‰ç±»å‹

äº¤å‰ç±»å‹å’Œè”åˆç±»å‹æ­£å¥½ç›¸åï¼š`A & B` æ˜¯**åŒæ—¶å±äº `A` å’Œ `B`** çš„æ‰€æœ‰å€¼çš„ç±»å‹ï¼š

![11](./img/02-types-are-just-data/11.svg)

äº¤å‰ç±»å‹ç”¨æ¥å¤„ç†å¯¹è±¡ç±»å‹å¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºå¯¹è±¡ç±»å‹ `A` å’Œ å¯¹è±¡ç±»å‹ `B` çš„äº¤é›†æ˜¯å…·æœ‰ `A` æ‰€æœ‰å±æ€§å’Œ `B` æ‰€æœ‰å±æ€§çš„å¯¹è±¡é›†åˆï¼š

![12](./img/02-types-are-just-data/12.svg)

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬æœ‰æ—¶ä¼šä½¿ç”¨è”åˆç±»å‹æ¥å°†å¯¹è±¡ç±»å‹åˆå¹¶åœ¨ä¸€èµ·[^2]ï¼š

```ts
type WithName = { name: string };
type WithAge = { age: number };

function someFunction(input: WithName & WithAge) {
  // `input` is both a `WithName` and a `WithAge`!
  input.name; // âœ… property `name` has type `string`
  input.age; // âœ… property `age` has type `number`
}
```

ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬å°è¯•å°†ä¸¤ç§å®Œå…¨ä¸é‡å çš„ç±»å‹ç›¸äº¤ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿä¾‹å¦‚ï¼Œå°† `string` å’Œ `number` ç›¸äº¤æ„å‘³ç€ä»€ä¹ˆï¼Ÿ

![13](./img/02-types-are-just-data/13.svg)

çœ‹èµ·æ¥ `string & number` ä¼šç»™æˆ‘ä»¬å¸¦æ¥æŸç§ç±»å‹é”™è¯¯ï¼Œä½†äº‹å®ä¸Šï¼Œè¿™å¯¹ç±»å‹æ£€æŸ¥å™¨æ¥è¯´å¾ˆé‡è¦ï¼ä¸é‡å çš„ç›¸äº¤ç±»å‹çš„ç»“æœæ˜¯**ç©ºé›†**ã€‚ä¸€ä¸ª**ä¸åŒ…å«ä»»ä½•ä¸œè¥¿çš„é›†åˆ**ã€‚

åœ¨ TypeScript ä¸­ï¼Œç©ºé›†è¢«ç§°ä¸º `never`ã€‚

## `never` â€” ç©ºé›†

The type never doesn't contain any value, so we can use it to represent values that should never exist at runtime. For instance, a function that always throws will return a value of type never:

`never` ç±»å‹ä¸åŒ…å«ä»»ä½•å€¼ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥è¡¨ç¤ºåœ¨è¿è¡Œæ—¶ä¸åº”è¯¥å­˜åœ¨çš„å€¼ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªæ€»æ˜¯æŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°å°†è¿”å›ä¸€ä¸ª `never` ç±»å‹çš„å€¼ï¼š

```ts
function panic(): never {
  throw new Error("ğŸ™€");
}

const oops: never = panic();
```

That's because the code using oops can never be reached!

That's good to know, but never doesn't sound very useful in practice, don't you think?

You would be surprised! We use never all the time when writing type-level code. never is essentially an empty union type. Having an empty type is immensely useful for type-level logic. We will use it to remove keys from object types, filter out items from a union, represent impossible cases, etc.

An interesting property of never is that it's a subtype of every other types â€” it's at the very bottom of our hierarchy of sets. That means you can assign a value of type never to any other type:

Edit


## è„šæ³¨

[^1]: This is true in TypeScript, but some languages do allow mixing values and types together in the same expression and the line between the world of values and the world of types becomes blurrier. They are called "dependent" type systems.


[^2]: Intersecting two object types is not exactly like merging two objects with `{...a, ...b}`, the way we would in JavaScript, because the intersection is applied recursively on keys that exist on both object types. We will learn more about intersections of objects in the next chapter.

export default ({ children }) => (
  <PageLayout meta={meta}>{children}</PageLayout>
);
